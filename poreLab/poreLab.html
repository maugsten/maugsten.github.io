<!DOCTYPE html>
<html>
<head>
  <title>PoreLab Summer Project: PIV & PTV in Multiphase Flow</title>
  <link rel="stylesheet" href="../styles.css"> <!-- External CSS file for styling -->
</head>
<body>
  <header>
    <h1>PoreLab Summer Project: PIV & PTV in Multiphase Flow</h1>
    <p>A Study on Velocimetry Methods for Multiphase Flow in Porous Media</p>
  </header>
  
  <nav>
    <ul>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#experimental set-up">Experimental Set-up</a></li>
      <li><a href="#data analysis">Data Analysis</a></li>
      <li><a href="#results">Results</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
    </ul>
  </nav>
  
  <main>
    <section id="about">
      <h2>About the Project</h2>
      <p>Welcome to my 2023 summer project focused on Particle Image Velocimetry (PIV) and Particle Tracking Velocimetry (PTV) 
        in multiphase flow in porous media.</p>
    
      <p>
        The UiO:Energy and Environment Initiative funds research projects within the field of energy, climate and environment.
        This project was proposed and supervised by researchers at PoreLab and the Njord Centre (Departments of Physics and Geosciences).
        Fluids flow through porous media, like soils, river beds, and rocks, carrying molecules, bacteria, and particles that impact 
        various environmental and energy processes, from carbon dioxide sequestration to groundwater remediation. While single-fluid flows 
        (e.g., air or water) in porous media are well-understood, our ability to predict multi-fluid flows (e.g., air and water together) 
        remains limited. This project aims to enhance our understanding of fluid dynamics in porous media through laboratory experiments.
        In this project, we used stereolithography 3D printing to create transparent model porous media, and imaging of fluorescent 
        particles to measure fluid velocities. 
        This website presents the work that was accomplished and attests to the efforts made during the project.
      </p>
    </section>

    <section id="abstract">
      <!-- <h3>Abstract</h3> -->
      <p>
        In this study, we fabricated model porous media through 3D printing techniques. 
        Subsequently, the evaluation of single-phase flow in the model was conducted using Particle Image Velocimetry (PIV) 
        and Particle Tracking Velocimetry (PTV). 
        A comparative analysis of the results from the two velocimetry methods revealed the superiority of PTV for the 
        specific flow under investigation. 
        Moving forward, the investigation extended to multiphase flow, involving a glycerol/water solution and air. 
        The PTV method was employed to assess the velocity field of the wet phase. 
        Furthermore, we explored various averaging techniques to effectively represent the temporal characteristics of the velocities.
      </p>
    </section>

    <section id="introduction">
      <h2>Introduction</h2>
      <p>
        Fluid flows through porous media play a crucial role in various environmental and energy-related processes, 
        influencing everything from groundwater remediation to carbon dioxide sequestration. 
        Porous media, such as soils, river beds, and rocks, serve as conduits for the transportation of molecules, bacteria, and particles. 
        While we have a solid understanding of fluid flows involving a single fluid, such as air or water, 
        predicting simultaneous flows of multiple fluids, like air and water together, remains a challenging task.
      </p>
      <p>
        In light of this challenge, our research project aims to delve deeper into the intricacies of fluid dynamics in porous media. 
        Through a collaborative effort between students and researchers at Porelab, we seek to gain new insights 
        by conducting laboratory experiments that explore the behavior of multiple fluids flowing together through porous media.
      </p>
      <p>
        To achieve this, we will employ two cutting-edge methodologies that are recently developed. 
        The first involves the construction of transparent model porous media using stereolithography 
        3D printing techniques. By creating these transparent models, we can visualize and better understand the interactions between 
        different fluids within the porous medium.
      </p>
      <p>
        The second methodology entails the use of laser-based imaging of fluorescent particles to precisely measure and 
        quantify fluid velocities. This technique will enable us to analyze the movements of various fluids as they navigate 
        through the intricate network of porous spaces. In this project we investigate simultaneous flows of a glycerol-water mixture 
        and air.
      </p>
    </section>
    
    <section id="experimental set-up">
      <h2>Experimental Set-up</h2>
      <p>
        We model porous media by 3D printing cells with cylinders in some configuration.
        All models have an inlet and an outlet for the fluids. 
        Some models have two inlets in order to pull in two different fluids.  
        In the following figure, we see some examples.
      </p>
      <p> 
        <div class="centered-image-container">
          <img src="IMG-7801.jpg" alt="models" style="width:700px;height:280px;">
        </div>
        <figcaption>Figure 1: This figure shows three examples of 3D printed model porous media. </figcaption>
      </p>
      <p>
        <!-- The experimental set-up is shown in figure 1.  -->
        The model porous media that we use in this project is made of 2 mm cylinders placed symmetrically in a 3D printed
        cell with length 40 mm, width 20 mm and height 2 mm. 
        The cylinders were spaced evenly with 6 mm between them. 
        A picture of the model is shown in figure 2. 
      </p>
      <p> 
        <div class="centered-image-container">
          <img src="IMG-7818.jpg" alt="model" style="width:420px;height:300px;">
        </div>
        <figcaption>Figure 2: This figure shows the model porous media used in this project. </figcaption>
      </p>
      <p>
        The fluid was pumped through the porous medium with a constant 
        flow rate of 0.5 mL/min using a syringe and a Harvard Apparatus PHD Ultra Programmable Syringe Pump.  
        The fluid was collected in a resevoir. 
        The fluid was a mixture of glycerol and water respectively accounting for 85% and 15% of the mass of the solution.
        Under the model porous media was a GREEN LIGHT LED panel lamp with a glass plate seperating them.
        On the LED panel, we put a Lee Farbfolie Bogen 126 Mauve high pass filter.
        A camera was mounted above the model with a tripod. 
        A MIDOPT FIL LP500/67 low pass filter was mounted on the camera.     
      </p>
      <p>
        There are three basic steps for particle velocimetry; Seeding, illumination and imaging. 
        Seeding means preparing a solution with tracing particles for the camera to see. 
        This includes applying surfacant to tracing particles, mixing tracers into some solution, 
        and removing trapped air with an ultrasonic bath. 
        Illumination involves lighting up the particles so that they stand out in the images. 
        We used a LED panel and pass filters in order to strengthen the signal from the particles.
        In addition to taking pictures of the particles, imaging includes tuning parameters like frame rate,
        shutter speed, and focal length. 
      </p>
      <p>
        For the seeding part, two different fluorescent types of particles were tested. 
        The property that seperated them was their size.
        We tried both 30 micron spheres and 2.5 micron spheres.  
        To prevent the particles from clumping together, we mixed them into some surfacant.
        This dampens the attractive force between the particles. 
        The amount used was enough to cover all particles, but not so much that it changes 
        the macroscoptic properties of the final solution.  
        The particles were suspended in the mixture of glycerol and water. 
        <!-- 85% and 15% of each. -->
      </p>
      <p>
        To illuminate the particle, we shun light at them from the LED panel.
        The producers of the LED panel and tracing particles provides the following emission spectrum.
        A key feature of the particles is that they emit light at a lower frequency than it was excited with.
        The trick is to filter out all the unwanted frequencies.
        We do this by adding the high pass filter over the LED panel. 
        This way, we know that all light with frequency below this threshold comes from the particles.
        Then we add a low pass filter on the camera to remove the frequencies above the threshold. 
        This should leave us with only the light from the particles. 
        In reality, the filters will not have discontinuity at the threshold and some light with other frequencies must be expected.
      </p>
      <p> 
        <div class="centered-image-container">
          <img src="FMGspectra.jpg" alt="model" style="width:380px;height:300px;">
          <a>&nbsp;&nbsp;&nbsp;</a>
          <img src="IMG-7619.jpg" alt="model" style="width:332px;height:300px;">
        </div>
        <figcaption>Figure 3: On the left we see the excitation and emission spectrum of the particles, and  
          on the right we see the effect of a filter being used to strenghten the particles singal. 
          The particles are put in a Petri dish and illuminated with the LED panel.
        </figcaption>
      </p>
      <p>
        For obtaining images of the fluid flow, we used a high speed camera. 
        We found that suitable camera settings were 50 frames per second and ?1/50? seconds exposure time.  
        By employing all the techniques described here, we obtain videos like the following of the fluid flow with particles.  
      </p>
      <video width="640" height="360" controls>
        <source src="multiPhaseFlow2Inverted.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <figcaption>Figure 4: Here is an example of multiphase flow in porous media. 
      </figcaption>
    </section>
    
    <section id="data analysis">
      <h2>Data Analysis</h2>
      <p>
        Having now obtained a sequence of images of the fluid flow, we begin analysing the data.
        The goal is to be left with a series of images only containing the particles as they flow through the model.
        First we want to remove the background in all the images. 
        At this stage the procedure varies from steady singlephase flow and unsteady multiphase flow. 
        For the singlephase flow, we subtract the average of the whole video. 
        By this, we mean the median of all values for each pixel.
        If the flow is unsteady, we see how many frames we could average over in the beginning without the interface changing too much. 
        For our unsteady video, the number of frames were 200. 
      </p>
      <p> 
        <div class="centered-image-container">
          <img src="bk.jpg" alt="bk" style="width:530px;height:250px;">
        </div>
        <figcaption>Figure 5: This figure shows the background being reducted from the video. </figcaption>
      </p>
      <p>
        Then we want to segment out all that is not fluid in the images.
        Segmenting out the boundary of the model porous media can easily be done by hand with ImageJ.
        The appropriate tool is called the Freeform selection tool.
        To segment out the cylinders, we used the Hough Circle Transform to find circles.
        This takes in some range of diameters to look for circles in and a strictness parameter. 
        Tuning these parameters works for our videos, but not that circles are harder to register if the 
        particle concentration is high.   
        If it is unsteady multiphase flow, we also need to segment the two phases. 
        In our images, the light intensity in each of the phases were comparable, but the intensity of the 
        interface was conciderably lower.
        This allowed us to segment the phases by using a digital low pass filter. 
        After the filtering, we were only left with the interface. 
        This interface was then morphologically closed. 
        By floodfilling the air phase, we obtained a segmentation of the two phases for each timestep.   
      </p>
      <p> 
        <div class="centered-image-container">
          <img src="cell.jpg" alt="noise" style="width:250px;height:250px;">
          <a>&nbsp;&nbsp;&nbsp;</a>
          <img src="cylinders.jpg" alt="noNoise" style="width:250px;height:250px;">
          <a>&nbsp;&nbsp;&nbsp;</a>
          <img src="interface.jpg" alt="noNoise" style="width:250px;height:250px;">
        </div>
        <!-- <img src="mountain.jpg" alt="Profile Picture" style="width:500px;height:300px;"> -->
        <figcaption>Figure 6: This figure shows the masks for the boundary of the model (left), 
          the cylinders (middle) and the interface (right). </figcaption>
      </p>
      <p>
        Putting the background reduced images and the segmentations together, we obtain a series of images only 
        containing the particles and some noise. This noise was dampened by the total variation denoising method.
        The effect can be seen in figure 7.
      </p>
      <p> 
        <div class="centered-image-container">
          <img src="particlesWithNoise2.jpg" alt="noise" style="width:320px;height:200px;">
          <a>&nbsp;&nbsp;&nbsp;</a>
          <img src="particlesDenoised2.jpg" alt="noNoise" style="width:320px;height:200px;">
        </div>
        <!-- <img src="mountain.jpg" alt="Profile Picture" style="width:500px;height:300px;"> -->
        <figcaption>Figure 7: This figure shows a close up of an image before (left) and after (left) denoising. </figcaption>
      </p>
      <p>
        These images are the input to the PIV and PTV algorithms. The PIV analysis was done in MATLAB with the PIVLAB add-on. 
        The add-on also includes the feature of adding masks like our segmention image of the cylinders. 
        This makes it so that the velocity field is not evaluated on points which are masked out as we see in figure 8. 
        The PTV analysis was done with Python and the open-source program TracTrac.  
        The PTV algorithm evaluates the fluid velocity at points where is detects particles. 
        By running TracTrac and the PTV algorithm, we obtain a .txt file with particle detections at each line.
        To better represent the findings, we use linear interpolation on the detections to evaluate the velocity field at every pixel.
        Here, we also use the cylinder mask and the mask for the boundary of the model to impose no-flux and no-slip conditions.  
        Then we divide the time into a set of bins; each bin containing 10 frames. 
        Now we average the velocity at each pixel over the bin. 
        Given that the interface does not move much during this time, the velocity field should be well represented.     
      </p>
    </section>
    
    <section id="results">
      <h2>Results</h2>
      <p>
      In the case of single phase steady flow we tested both PIV and PTV.
      The PIV result is shown in figure 8. This is an ensemble average. 
      This resolves the fluid flow well, except for at the boundary. 
      The boundary is of course very important, and a closer investigation reveales a massive divergence in the field. 
      The boundary is better resolved with the PTV method because of higher resolution, 
      and because we can impose boundary conditions (by saying we have detection of 0 velocity at the boundaries).
      </p>
      <p> 
        <div class="centered-image-container">
          <img src="piv.jpg" alt="noise" style="width:600px;height:250px;">
          <a>&nbsp;&nbsp;&nbsp;</a>
          <img src="pivZoom.jpg" alt="noNoise" style="width:300px;height:250px;">
        </div>
        <!-- <img src="mountain.jpg" alt="Profile Picture" style="width:500px;height:300px;"> -->
        <figcaption>Figure 8: This figure shows the PIV evaluated field and a close up of the boundary. </figcaption>
      </p>
      <p>
        For the unsteady multiphase flow, we used the PTV method to obtain velocity detections at different locations. 
        We impose boundary conditions by setting the velocities at the boundaries (not the interface) to zero. 
        For each frame we linear interpolate the registered velocities and evaluate the velocity at each pixel. 
        Then we average the velocities over 10 frames to better represent the field. 
        The horizontal and vertical velocities are shown in the two following videos.   
      </p>
      <video width="640" height="360" controls>
        <source src="ux2speed.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <figcaption>Figure 9: This video shows the horizontal velocities evaluated with the PTV method. </figcaption>
      <video width="640" height="360" controls>
        <source src="uy.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <figcaption>Figure 10: This video shows the vertical velocities evaluated with the PTV method. </figcaption>
    </section>
    
    <!-- <section id="conclusion">
      <h2>Conclusion</h2>
      <p>Summarize your project and draw conclusions here.</p> -->

    </section>
  </main>
  
  <footer>
    <p>© 2023 Ole Petter Maugsten</p>
  </footer>
</body>
</html>